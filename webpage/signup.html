<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">

</head>

<body>

<div class="w3-container">
    <div class="w3-display-container w3-blue" style="height: 80px">
        <h1 class="w3-display-topmiddle">Sign up</h1>
    </div>

    <label class="w3-text-blue" ><b>UserId</b></label>
    <input class="w3-input" style="width: 500px" id="userId_signup" type="text">

    <label class="w3-text-blue" ><b>Password</b></label>
    <input class="w3-input" style="width: 500px" id="password_signup" type="password">

    <label class="w3-text-blue" ><b>Confirm Password</b></label>
    <input class="w3-input" style="width: 500px" id="cfm_password_signup" type="password">

    <button class="w3-button w3-blue w3-margin-top" id="signup_btn" type="button">signup</button>
</div>





<script src="https://www.gstatic.com/firebasejs/4.6.0/firebase.js"></script>
<script>
    // Initialize Firebase
    var config = {
        apiKey: "AIzaSyACsDAUeirU-gel9iB2tXzYMBUoskBkDog",
        authDomain: "oct13am-7683b.firebaseapp.com",
        databaseURL: "https://oct13am-7683b.firebaseio.com",
        projectId: "oct13am-7683b",
        storageBucket: "oct13am-7683b.appspot.com",
        messagingSenderId: "329352361598"
    };
    firebase.initializeApp(config);

    var sign_up_id = document.getElementById("userId_signup");
    var pwd = document.getElementById("password_signup");
    var cfm_pwd = document.getElementById("cfm_password_signup");
    var samepwd = Boolean(false);
    var sameID = Boolean(false);

    signup_btn.addEventListener("click",function(){
        //console.log(sign_up_id.value);

        var databaseRef = firebase.database().ref('/User_profile/').on('value' ,function (snapchat) {
            var preuser = Object.keys(snapchat.val());
            //console.log(preuser)
            for (var iterator in preuser){
                //console.log(preuser[iterator]);
                if (preuser[iterator] == sign_up_id.value)
                    sameID = true;
            }
            if (pwd.value == cfm_pwd.value){
                samepwd = Boolean(true);
            }
            if (sameID == false && samepwd == true){
                var username = sign_up_id.value, password = pwd.value;
                console.log(username + password);
                var addref = firebase.database().ref('User_profile/' + username).set({
                    user_pwd : password
                });
                window.location.href='signin.html';


            }
        });





    })

</script>



</body>
</html>